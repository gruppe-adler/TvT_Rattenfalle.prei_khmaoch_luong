params ["_crow", "_index"];

private _waypoint = [0,0,0]; // fallback
private _startlingPoint = missionNamespace getVariable [format ["GRAD_crows_startlingPoint_%1", _index], []];
private _circlingPoint = missionNamespace getVariable [format ["GRAD_crows_circlePoint_%1", _index], []];
private _despawnPoint = missionNamespace getVariable [format ["GRAD_crows_distantTarget_%1", _index], []];
private _density = missionNamespace getVariable [format ["GRAD_crows_density_%1", _index], 20];

if (count _startlingPoint == 0) then {
	_waypoint = getPos _crow; _waypoint set [2,100];
};

if (count _circlingPoint > 0) then {
	_waypoint = _circlingPoint;
};

if (count _despawnPoint > 0) then {
	_waypoint = _despawnPoint;
	// diag_log format ["targetpoint set to %1", _startlingPoint];
};

_flockHeight = _startlingPoint select 2;
_heightRandom = _flockHeight + 7 - random 14;

if (_heightRandom < 5) then {
	_heightRandom = _flockHeight;
};

_waypoint set [2,_heightRandom];

// _startlingPoint = _startlingPoint getPos [_density, selectRandom [00,090,180,270]];


_waypoint
