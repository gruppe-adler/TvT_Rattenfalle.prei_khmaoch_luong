/*
 [vehicle player] execVM "setAttachments.sqf";
*/
if (!(isServer)) exitWith {};

params ["_obj"];

// should be only vanilla/apex assets
_attachments = 
[
	["Land_BackAlley_02_l_1m_F",[-0.974546,0.00534398,-0.224125],[-0.00113624,0.999585,0.0287744],[2.05066,0.294556,-1.24449]],

	["Land_MkV_Roadway",[0.00113615,-0.999585,-0.0287745],[0.00106384,-0.0287733,0.999585],[-0.161865,-1.44836,-1.632755]],
	["Land_TinWall_01_m_4m_v1_F",[0.999958,0.00918758,-0.000799767],[0.00106384,-0.0287733,0.999585],[-2.35364,0.669067,-1.291355]],

	["Land_ClothShelter_02_F",[0.999501,-0.0315123,-0.00197084],[0.00106384,-0.0287733,0.999585],[-0.118652,-5.03467,0.302025]],
	["Land_Gate_wood2_5",[-0.124624,-0.681257,-0.721358],[0.00155569,-0.727159,0.686467],[0.873779,5.21655,-1.392212]],

	["Land_Plank_01_4m_F",[-0.00113624,0.999585,0.0287745],[0.00106384,-0.0287733,0.999585],[-0.088623,1.11035,1.15383]],
	["Land_Plank_01_4m_F",[-0.00113624,0.999585,0.0287745],[0.00106384,-0.0287733,0.999585],[-0.967773,1.4408,1.10923]],
	["Land_Plank_01_4m_F",[-0.00113624,0.999585,0.0287745],[0.00106384,-0.0287733,0.999585],[0.610352,1.60608,1.15363]],
	["Land_Plank_01_4m_F",[-0.00113624,0.999585,0.0287745],[0.00106384,-0.0287733,0.999585],[1.3302,1.29053,1.10165]],
	["Land_Plank_01_4m_F",[-0.00113624,0.999585,0.0287745],[0.00106384,-0.0287733,0.999585],[-1.53918,1.45862,1.10905]],
	["Land_Plank_01_4m_F",[-0.0658181,-0.996122,0.0583922],[0.000960759,0.0584558,0.998289],[0.63623,7.95215,-0.862125]],
	["Land_Plank_01_4m_F",[-0.0658181,-0.996122,0.0583922],[0.000960759,0.0584558,0.998289],[-1.04858,7.97717,-0.875188]],
	["Land_Plank_01_4m_F",[-0.0658181,-0.996122,0.0583922],[0.000960759,0.0584558,0.998289],[-0.140747,8.11035,-0.815603]],

	["Land_Plank_01_8m_F",[-0.00113624,0.999585,0.0287745],[-0.999999,-0.00116638,0.00103066],[-2.83618,3.49438,-1.09692]],
	["Land_Plank_01_8m_F",[-0.00113624,0.999585,0.0287745],[-0.999999,-0.00116638,0.00103066],[-2.98608,-3.33801,-1.691399]],
	["Land_Plank_01_8m_F",[-0.00113624,0.999585,0.0287745],[-0.999999,-0.00116638,0.00103066],[-2.9751,-4.33044,-1.059494]],
	["Land_Plank_01_8m_F",[-0.00113624,0.999585,0.0287745],[0.999999,0.00116638,-0.00103069],[2.57043,-4.44104,-1.522659]],
	["Land_Plank_01_8m_F",[-0.00113624,0.999585,0.0287745],[0.999999,0.00116638,-0.00103069],[2.51636,1.43896,-1.35429]],

	["land_nav_pier_pneu",[-0.152244,-0.987938,-0.028276],[0.00106384,-0.0287733,0.999585],[2.50916,-8.86133,-1.35]],
	["land_nav_pier_pneu",[0.435625,0.899769,0.0254364],[0.00106384,-0.0287733,0.999585],[-2.2561,9.13428,-1.65]],

	["Land_BambooFence_01_s_4m_F",[-0.00113624,0.999585,0.0287745],[0.00106384,-0.0287733,0.999585],[-0.14978,-11.7322,-1.392925]]
];

private _hasCUP = isClass (configFile / "CfgVehicles" / "CUP_c_GrassAutumn"); 

// cup assets
_cupAttachments = [
	["CUP_c_GrassAutumn",[-0.00113624,0.999585,0.0287745],[0.00106384,-0.0287733,0.999585],[0.928589,0.808716,1.13281]],
	["CUP_Krovi",[0.999612,0.027866,-0.000261737],[0.00106384,-0.0287733,0.999585],[-2.06372,1.4314,-1.752136]],
	["CUP_c_GrassAutumn",[-0.00113624,0.999585,0.0287745],[0.00106384,-0.0287733,0.999585],[-1.61023,2.27246,1.14163]],
	["CUP_Krovi4",[0.999298,-0.0374009,-0.00214013],[0.00106384,-0.0287733,0.999585],[1.71887,2.48193,-1.996574]],
	["CUP_ker_trs_travy3",[-0.00113624,0.999585,0.0287745],[0.00106384,-0.0287733,0.999585],[-1.87891,0.894531,1.06987]],
	["CUP_Krovi4",[-0.995692,0.0926523,0.00372671],[0.00106384,-0.0287733,0.999585],[1.64709,-4.60864,-2.0962]],
	["CUP_Krovi",[0.0600727,0.997783,0.0286575],[0.00106384,-0.0287733,0.999585],[-0.0986328,-10.3551,-1.071352]],
	["CUP_Krovi",[0.989142,-0.146865,-0.00528027],[0.00106384,-0.0287733,0.999585],[-0.169067,10.5267,-1.387571]]
];

if (_hasCUP) then {
	_attachments append _cupAttachments;
};

{
	_x params ["_type", "_vectorDir", "_vectorUp", "_position"];
	
	private _veh = _type createVehicle [0,0,0];
	
	// private _attachPos = _obj ModelToWorldVisual _position;
	_veh attachTo [_obj, _position];
	_veh setVectorDirAndUp [_vectorDir, _vectorUp];

} forEach _attachments;